<%= form_for @changeset, @action, fn f -> %>
  <%= if @changeset.action do %>
    <div class="alert alert-danger">
      <p>Oops, something went wrong! Please check the errors below.</p>
    </div>
  <% end %>

  <%= label f, :patient_id, "Patient" %>
  <%= select f, :patient_id, Enum.map(@patients, &{patient_name(&1), &1.id}) %>
  <%= error_tag f, :patient_id %>

  <%= label f, :prescription_id, "Prescription" %>
  <%= select f, :prescription_id, Enum.map(@prescriptions, &{&1.name, &1.id}) %>
  <%= error_tag f, :prescription_id %>

  <%= label f, :location_id, "Location" %>
  <%= select f, :location_id, Enum.map(@locations, &{coordinates(&1), &1.id}) %>
  <%= error_tag f, :location_id %>

  <div>
    <%= submit "Save" %>
  </div>
<% end %>
